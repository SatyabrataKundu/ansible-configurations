  - name: Configure Storage Profile
    ucs_managed_objects:
      hostname: "{{ ucs_hostname }}"
      username: "{{ ucs_username }}"
      password: "{{ ucs_password }}"
      objects:
      - module: ucsmsdk.mometa.lstorage.LstorageProfile
        class: LstorageProfile
        properties:
          parent_mo_or_dn: '{{ ORG }}'
          descr: "{{ item.descr }}"
          name: "{{ item.name }}"
        children:
          - module: ucsmsdk.mometa.lstorage.LstorageDasScsiLun
            class: LstorageDasScsiLun
            properties:
              expand_to_avail: "{{ item.expand_to_avail_01 }}"
              size: "{{ item.size_01 }}"
              auto_deploy: "{{ item.auto_deploy_01 }}"
              local_disk_policy_name: "{{ item.local_disk_policy_name_01 }}"
              name: "{{ item.name_01 }}"
          - module: ucsmsdk.mometa.lstorage.LstorageDasScsiLun
            class: LstorageDasScsiLun
            properties:
              expand_to_avail: "{{ item.expand_to_avail_02 }}"
              size: "{{ item.size_02 }}"
              auto_deploy: "{{ item.auto_deploy_02 }}"
              local_disk_policy_name: "{{ item.local_disk_policy_name_02 }}"
              name: "{{ item.name_02 }}"
    loop:
      - {
          name: 'ESX-COMP-STP', descr: 'ESX HOST 2 DISK HDD',
          expand_to_avail_01: 'no', size_01: '30', local_disk_policy_name_01: 'ESX-HOST-2DSK-HD', auto_deploy_01: 'auto-deploy', name_01: 'boot', 
          expand_to_avail_02: 'yes', size_02: '245', local_disk_policy_name_02: 'ESX-HOST-2DSK-HD', auto_deploy_02: 'auto-deploy', name_02: 'datastore'
        }
      - {
          name: 'ESX-MGMT-STP', descr: 'ESX MGMT 4 DISK HDD',
          expand_to_avail_01: 'yes', size_01: '1', local_disk_policy_name_01: 'ESX-MGMT-D01-R1', auto_deploy_01: 'auto-deploy', name_01: 'D01', 
          expand_to_avail_02: 'yes', size_02: '1', local_disk_policy_name_02: 'ESX-MGMT-D01-R2', auto_deploy_02: 'auto-deploy', name_02: 'D02'
        }